# CLAUDE.md

This file provides guidance to Claude Code (claude.ai/code) when working with code in this repository.

## Project Overview

This is an RPG Maker MZ game project titled "Pharmageddon". RPG Maker MZ is a game development engine that uses JSON data files for game content and JavaScript for game logic and plugins.

## Key Technologies

- **Engine**: RPG Maker MZ v1.9.1
- **Runtime**: NW.js (Node-Webkit) for desktop deployment
- **Graphics**: PixiJS (WebGL renderer)
- **Script Loading**: Sequential loading via `js/main.js`
- **Data Format**: JSON files in `data/` directory

## Setup

**Critical first step**: After cloning, run `git lfs install` to enable Git LFS tracking for binary assets (images, audio, fonts). Without this, you'll get LFS pointer files instead of actual assets, causing the game to fail loading resources.

## Architecture

### Script Loading Order

The game follows a strict loading sequence defined in `js/main.js`:
1. Core libraries (PixiJS, pako, localforage, effekseer, vorbisdecoder)
2. Engine core (`rmmz_core.js`)
3. Game managers (`rmmz_managers.js`)
4. Game objects (`rmmz_objects.js`)
5. Scene management (`rmmz_scenes.js`)
6. Sprites (`rmmz_sprites.js`)
7. Windows/UI (`rmmz_windows.js`)
8. Plugin loader (`plugins.js`)

After all scripts load, `PluginManager.setup($plugins)` initializes plugins, then `Scene_Boot` starts the game.

### Data Structure

Game content is stored as JSON in the `data/` directory. **All these files are generated by RPG Maker editor - never edit directly**.

**Critical concept: Database ID References**
- All game objects use numeric IDs to reference each other
- Example: Actor with `"classId": 1` references entry 1 in `Classes.json`
- Example: Actor with `"equips": [2, 0, 0, 3, 0]` equips Weapon ID 2 and Armor ID 3
- Example: `"characterIndex": 5` selects the 6th character (0-indexed) from an 8-character sprite sheet
- IDs must match across files - if you renumber IDs in one file, references break
- Array index 0 is always `null` - actual data starts at index 1 (ID 1)

- **Maps**: `MapXXX.json` (tile-based level data, events, NPC placement)
  - Each map is a separate file: `Map001.json`, `Map002.json`, etc.
  - **Structure**:
    - `data[]`: Flattened array of tile IDs (width × height × 4 layers)
    - `events[]`: Map events (NPCs, triggers, cutscenes) - **THE CORE MECHANIC**
    - `width`, `height`: Map dimensions in tiles
    - `tilesetId`: Reference to tileset definition
    - `bgm`, `bgs`: Background music/sounds for this map
    - `encounterList[]`: Random enemy encounters
  - `MapInfos.json`: Map hierarchy, names, and tree structure
- **Database** (core game definitions):
  - `Actors.json`: Player characters (stats, class, equipment, sprites)
  - `Classes.json`: Character classes (skill learning, stat curves)
  - `Skills.json`: Magic/abilities (effects, animations, costs)
  - `Items.json`: Consumables and key items
  - `Weapons.json`, `Armors.json`: Equipment definitions
  - `States.json`: Status effects (poison, buffs, etc.)
  - `Enemies.json`: Enemy stats and behaviors
  - `Troops.json`: Enemy formations for battles
- **Configuration**:
  - `System.json`: Critical game settings (title, resolution, party, BGM, variables, switches, fonts, UI settings)
  - `Tilesets.json`: Tileset definitions and passability rules
  - `Animations.json`: Battle animations and effects
  - `CommonEvents.json`: Reusable event logic

### Event System

**Events are THE primary way to create game content** - all NPCs, cutscenes, dialogue, triggers, doors, treasure chests, etc. are implemented as map events or common events.

**Map Events** (in `MapXXX.json` `events[]` array):
- Placed on specific maps at X/Y coordinates
- Can have graphics (character sprites) or be invisible triggers
- Execute "event commands" (show text, conditional branches, variable operations, etc.)
- Triggered by player interaction, touch, autorun, or parallel processing

**Common Events** (in `CommonEvents.json`):
- Reusable event logic that can be called from anywhere
- Triggered by switches or run as parallel processes
- Used for: cutscenes, shared mechanics, background systems

**Variables & Switches** (configured in `System.json`):
- **Variables**: Numeric values (0-N) for game state (gold, quest progress, counters, etc.)
- **Switches**: Boolean ON/OFF flags for conditional logic (doors opened, quests completed, etc.)
- Referenced by ID in event commands
- Persist in save files

**Note Fields**:
- Every database entry has a `"note"` field (string)
- Used for custom metadata, plugin parameters, and developer notes
- Plugins often use special tags in notes (e.g., `<CustomTag: value>`)
- Editable in RPG Maker's database "Note" area

### Plugin System

Custom plugins extend game functionality via JavaScript. Available plugins:
- `AltSaveScreen.js`: Custom save screen UI
- `AltMenuScreen.js`: Custom menu screen UI
- `TextPicture.js`: Display text as pictures
- `ButtonPicture.js`: Picture-based button functionality

**Important**: `plugins.js` is auto-generated. Enable/disable plugins using RPG Maker's Plugin Manager, not by editing this file directly.

**Plugin Development**:
- Plugins are JavaScript files with JSDoc-style header comments
- Header format:
  ```javascript
  /*:
   * @target MZ
   * @plugindesc Your plugin description
   * @author Your Name
   *
   * @param paramName
   * @text Display Name
   * @desc Parameter description
   * @default default value
   *
   * @help YourPlugin.js
   * Help text goes here...
   */
  ```
- Can override core RMMZ classes/methods (e.g., `Scene_Map.prototype.update`)
- Register plugin commands via `PluginManager.registerCommand()`
- Load order matters: plugins are loaded sequentially as listed in Plugin Manager

**Global Game Objects** (available in plugins and console):
- **Static Data** (loaded at boot, read-only):
  - `$dataActors`, `$dataClasses`, `$dataSkills`, `$dataItems`, `$dataWeapons`, `$dataArmors`
  - `$dataEnemies`, `$dataTroops`, `$dataStates`, `$dataAnimations`, `$dataTilesets`
  - `$dataCommonEvents`, `$dataSystem`, `$dataMapInfos`
  - `$dataMap` - Current map data (changes when player enters new map)
- **Game State** (runtime state, saved in save files):
  - `$gameSystem` - System settings, save count, frame count
  - `$gameScreen` - Screen effects, pictures, weather
  - `$gameTimer` - Game timer
  - `$gameMessage` - Message window state
  - `$gameSwitches` - All game switches (use `.setValue(id, bool)`)
  - `$gameVariables` - All game variables (use `.setValue(id, value)`)
  - `$gameSelfSwitches` - Map event self-switches
  - `$gameParty` - Player party, inventory, gold (use `.gainGold()`, `.gainItem()`)
  - `$gameActors` - Actor instances (use `.actor(id)` to get specific actor)
  - `$gamePlayer` - Player character on map
  - `$gameMap` - Current map state, events
  - `$gameTroop` - Current battle enemy troop

### Asset Directories & Sprite Indexing

- `img/`: Graphics organized by type
  - `battlebacks1/`, `battlebacks2/`: Battle backgrounds
  - `characters/`: Character sprites for map movement
    - **Standard format**: 8 characters per sheet (4 columns × 2 rows), 3 frames per direction
    - Each character: 4 directions (down, left, right, up) × 3 frames = 12 frames
    - `characterIndex` (0-7) selects which character from the sheet
    - **Special prefixes**: `!` (fixed direction), `$` (single character), `%` (3×4 format)
  - `faces/`: Character portraits for dialogues
    - **Format**: 8 faces per sheet (4 columns × 2 rows)
    - `faceIndex` (0-7) selects which face from the sheet
  - `sv_actors/`, `sv_enemies/`: Side-view battle sprites (used when `optSideView: true`)
  - `enemies/`: Front-view enemy graphics (used when `optSideView: false` - current setting)
  - `tilesets/`: Tileset images for maps
    - **A1-A5**: Autotiles (animated water, cliffs, walls)
    - **B-E**: Standard tiles (floors, decorations, etc.)
  - `titles1/`, `titles2/`: Title screen images
  - `parallaxes/`: Parallax scrolling backgrounds
  - `pictures/`: In-game picture resources
  - `system/`: UI elements and system graphics
- `audio/`: Sound and music organized by type
  - `bgm/`: Background music (loops)
  - `bgs/`: Background sounds (ambient loops)
  - `me/`: Music effects (short jingles)
  - `se/`: Sound effects (one-shots)
- `fonts/`: Custom fonts (`mplus-2p-bold-sub.woff`, `Valorax-lg25V.otf`) - tracked via Git LFS
- `movies/`: Video files for cutscenes
- `effects/`: Effekseer particle effects (.efkefc files)
- `icon/`: Application icon
- `save/`: Save game files (currently tracked in git)

## Asset Specifications for AI Image Generation

This section provides exact technical specifications needed to generate assets using AI image generators (Midjourney, DALL-E, Stable Diffusion, etc.).

### Character Sprites (`img/characters/`)

**Standard 8-Character Sheet**:
- **Dimensions**: 576 × 384 pixels
- **Layout**: 4 columns × 2 rows = 8 character positions
- **Individual Character Block**: 144 × 192 pixels
- **Frame Layout**: 3 columns × 4 rows per character
  - **Individual Frame**: 48 × 48 pixels
  - Row 1: Down-facing (3 frames: left step, center, right step)
  - Row 2: Left-facing (3 frames)
  - Row 3: Right-facing (3 frames)
  - Row 4: Up-facing (3 frames)

**AI Prompt Template**:
```
Create an RPG character sprite sheet, 576×384 pixels, with 8 characters arranged in a 4×2 grid. Each character occupies 144×192 pixels and shows 4 directional views (down, left, right, up) with 3 walking animation frames per direction. Each frame is 48×48 pixels. Transparent PNG background. Pixel art style.
```

**Special Formats**:
- **$ Prefix** (e.g., `$Hero.png`): Single large character
  - Dimensions: 144 × 192 pixels (no sheet, just one character)
  - Layout: 3 columns × 4 rows = 12 frames (48×48px each)
- **! Prefix** (e.g., `!Statue.png`): Disables walking animation
  - Same dimensions as standard sheet (576×384px)
  - Use for static objects that need direction facing
- **!$ Combined**: Single large character with no animation (144×192px)

### Face Portraits (`img/faces/`)

**Specifications**:
- **Sheet Dimensions**: 576 × 288 pixels
- **Layout**: 4 columns × 2 rows = 8 faces per sheet
- **Individual Face**: 144 × 144 pixels
- **Format**: PNG (can have background or transparent)

**AI Prompt Template**:
```
Create RPG character portrait sheet, 576×288 pixels, containing 8 character faces in a 4×2 grid. Each portrait is 144×144 pixels showing character expressions for dialogue. Anime/JRPG art style.
```

### Tilesets (`img/tilesets/`)

**Base Tile Size**: 48 × 48 pixels (all tiles)

**A1 - Animated Water/Waterfalls**:
- **Dimensions**: 768 × 576 pixels
- **Layout**: 16 columns × 12 rows
- **Mini-tiles**: 24 × 24 pixels (autotiles split into 2×2 sub-grids)
- **Animation**: 3 frames for water animation (vertical columns)
- **Content**: Animated water surfaces, waterfalls, lava

**A2 - Ground Autotiles**:
- **Dimensions**: 768 × 576 pixels
- **Layout**: 16 columns × 12 rows
- **Mini-tiles**: 24 × 24 pixels
- **Content**: Ground types (grass, dirt, sand), flooring variations
- **Note**: Autotiles automatically connect based on placement

**A3 - Building/Roof Autotiles**:
- **Dimensions**: 768 × 384 pixels
- **Layout**: 16 columns × 8 rows
- **Mini-tiles**: 24 × 24 pixels
- **Content**: Building exteriors, roofs, walls

**A4 - Wall Autotiles**:
- **Dimensions**: 768 × 720 pixels
- **Layout**: 16 columns × 15 rows
- **Mini-tiles**: 24 × 24 pixels
- **Content**: Wall tops, wall sides, mixed floor/wall types

**A5 - Normal Tiles (No Autotiling)**:
- **Dimensions**: 384 × 768 pixels
- **Layout**: 8 columns × 16 rows
- **Tile Size**: 48 × 48 pixels (full tiles, not mini-tiles)
- **Content**: Special floor tiles, stairs, decorative elements

**B - Walls/Buildings**:
- **Dimensions**: 768 × 768 pixels
- **Layout**: 16 columns × 16 rows
- **Tile Size**: 48 × 48 pixels
- **Content**: Wall decorations, building parts

**C - Upper Layer Objects**:
- **Dimensions**: 768 × 768 pixels
- **Layout**: 16 columns × 16 rows
- **Tile Size**: 48 × 48 pixels
- **Content**: Furniture, objects placed above characters

**D & E - Additional Tiles**:
- **Dimensions**: 768 × 768 pixels (each)
- **Layout**: 16 columns × 16 rows (each)
- **Tile Size**: 48 × 48 pixels
- **Content**: Extra decorations and objects

**AI Prompt Template (A5 Example)**:
```
Create RPG tileset, 384×768 pixels, in an 8×16 grid of 48×48 pixel tiles. Include stairs, decorative floor tiles, special terrain elements. Top-down pixel art style. Transparent background where appropriate.
```

**AI Prompt Template (B/C/D/E Example)**:
```
Create RPG tileset, 768×768 pixels, in a 16×16 grid of 48×48 pixel tiles. Include [walls/furniture/decorations]. Top-down pixel art style. Transparent background for non-rectangular objects.
```

### Battle Graphics

**Enemy Sprites** (`img/enemies/`):
- **Dimensions**: Variable, typically ~224 × 228 pixels
- **Format**: Single static image per enemy
- **Note**: No standard size; custom per enemy
- **Transparency**: Required (alpha channel)

**AI Prompt Template**:
```
Create RPG enemy sprite, approximately 224×228 pixels, single static image. Front-facing view. Transparent PNG background. Fantasy/JRPG monster art style.
```

**Side-View Actors** (`img/sv_actors/`):
- **Dimensions**: 576 × 384 pixels
- **Layout**: 9 columns × 6 rows
- **Individual Frame**: 64 × 64 pixels
- **Motion Types** (rows): walk, wait, chant, guard, damage, evade
- **Additional Motions**: thrust, swing, missile, skill, spell, item, escape, victory, dying, abnormal, sleep, dead
- **Patterns**: 3 animation frames per motion (horizontal)

**AI Prompt Template**:
```
Create side-view RPG battle character sprite sheet, 576×384 pixels, with 9 columns and 6 rows of 64×64 pixel frames. Include battle motion animations: walking, waiting, chanting, guarding, taking damage, evading, and various attack poses. Each motion has 3 animation frames. Transparent background. Anime battle sprite style.
```

**Side-View Enemies** (`img/sv_enemies/`):
- Same specifications as SV Actors (576×384px, 9×6 grid, 64×64px frames)

**Battlebacks** (`img/battlebacks1/` and `img/battlebacks2/`):
- **Dimensions**: 1000 × 740 pixels each
- **battleback1**: Ground/floor layer
- **battleback2**: Sky/upper layer
- **Format**: PNG (can be opaque or transparent)

**AI Prompt Template**:
```
Create RPG battle background, 1000×740 pixels. [Battleback1: ground/floor layer with terrain]. [Battleback2: sky/upper layer with atmosphere]. Landscape orientation, painterly style.
```

### UI & System Graphics

**IconSet** (`img/system/IconSet.png`):
- **Dimensions**: 512 × 640 pixels
- **Layout**: 16 columns × 20 rows = 320 icons
- **Individual Icon**: 32 × 32 pixels
- **Content**: Items, skills, weapons, armor, status effects

**AI Prompt Template**:
```
Create RPG icon set, 512×640 pixels, with 16×20 grid of 32×32 pixel icons. Include weapons, armor, potions, spells, items, status effects. Transparent background. Pixel art or clean icon style.
```

**Title Screen** (`img/titles1/`):
- **Recommended Dimensions**: 816 × 624 pixels (matches game resolution)
- **Alternative**: Larger dimensions (e.g., 1536×1024px) - will be scaled
- **Format**: PNG

**AI Prompt Template**:
```
Create RPG title screen background, 816×624 pixels or larger. Epic fantasy scene for game title screen. Landscape composition.
```

**Balloon Icons** (`img/system/Balloon.png`):
- **Dimensions**: 384 × 720 pixels
- **Layout**: 8 columns × 15 rows
- **Individual Balloon**: 48 × 48 pixels
- **Animation**: 8 frames per balloon type (horizontal)
- **Types**: Exclamation, question, music note, heart, anger, sweat, frustration, silence, light bulb, zzz, etc.

**Weapon Sprites** (`img/system/Weapons1.png`, `Weapons2.png`, `Weapons3.png`):
- **Individual Weapon Frame**: 96 × 64 pixels
- **Layout per Sheet**: 6 columns × 6 rows
- **Animation**: 3 attack frames per weapon (horizontal)
- **Total per Sheet**: 12 weapons (2 weapons per row)

### Parallax Backgrounds (`img/parallaxes/`)

**Specifications**:
- **Dimensions**: Variable, commonly 816×816 pixels or larger
- **Usage**: Scrolling background layers for maps
- **Seamless Tiling**: Can be seamless for infinite scrolling or full-screen images
- **Format**: PNG with optional transparency

**AI Prompt Template**:
```
Create seamless tiling parallax background, 816×816 pixels or larger. [Describe scene: forest, mountains, sky, etc.]. Should tile seamlessly on all edges for infinite scrolling. Landscape/atmospheric art style.
```

### Technical Requirements Summary

**File Format**:
- **Primary**: PNG (`.png`)
- **Color Depth**: 24-bit RGB + 8-bit alpha (32-bit RGBA)
- **Compression**: PNG compression acceptable

**Transparency**:
- **Required**: Characters, battle sprites, UI elements
- **Optional**: Faces, battlebacks, title screens
- **Method**: Alpha channel transparency (not color-key)

**Pixel Density**:
- **No scaling**: Assets should be created at exact pixel dimensions
- **Pixel-perfect**: Especially important for tilesets and character sprites
- **Anti-aliasing**: Use for larger assets (faces, title screens), avoid for pixel art

**Animation Frame Requirements**:
- **Character Walking**: 3 frames per direction
- **Water/Waterfalls**: 3 animation frames (A1 tilesets)
- **Balloons**: 8 frames per balloon type
- **SV Actors**: 3 frames per motion type
- **Weapons**: 3 attack animation frames

**Grid Alignment**:
- All sheet-based assets must align to exact grid dimensions
- No gaps or padding between grid cells
- Frames must be pixel-perfect aligned

### AI Generation Best Practices

1. **Specify exact dimensions** in every prompt
2. **Request transparent background** for characters, enemies, and objects
3. **Include "pixel art style"** for tilesets, characters, and icons
4. **Specify grid layout** for multi-element sheets (e.g., "8 characters in 4×2 grid")
5. **Request consistent style** across related assets
6. **Test single tiles/characters** before generating full sheets
7. **Verify pixel-perfect dimensions** after generation (AI often adds padding)
8. **Post-process if needed**: Crop to exact dimensions, ensure transparency
9. **For animations**: Specify "3 walking frames" or "animation sequence"
10. **For tilesets**: Request "top-down view" or "isometric" based on game style

### Common AI Generation Adjustments

After generating with AI, you may need to:
- **Crop/resize**: Ensure exact pixel dimensions
- **Remove backgrounds**: If AI added unwanted backgrounds
- **Align to grid**: Ensure frames align perfectly to grid cells
- **Add transparency**: Convert white/colored backgrounds to alpha
- **Tile seamlessly**: Edit edges of parallax/tileset for seamless tiling
- **Adjust canvas size**: Use image editor to set exact dimensions without scaling content

## Development Workflow

### Running the Game

**Browser**: Open `index.html` in a web browser. Note that the game requires local file access (XHR to local files), which some browsers block by default. Chrome/Edge with `--allow-file-access-from-files` flag or Firefox work best for development.

**Desktop (NW.js)**: Use RPG Maker MZ's playtest feature or launch via NW.js with the project directory as the app path. The `package.json` configures NW.js window settings (816x624, centered).

**Troubleshooting**: If assets fail to load, verify Git LFS is installed (`git lfs install`) and pull LFS objects (`git lfs pull`).

### Testing & Debugging

**Playtest Mode** (in RPG Maker MZ editor):
- Press F12 or Game → Playtest to launch the game
- Opens Chrome DevTools automatically for debugging
- JavaScript console shows errors and `console.log()` output
- Can inspect variables, set breakpoints in plugin code

**Console Commands** (during playtest):
- `$gameVariables.setValue(1, 100)` - Set variable 1 to 100
- `$gameSwitches.setValue(1, true)` - Turn switch 1 ON
- `$gameParty.gainGold(1000)` - Add 1000 gold
- `SceneManager.goto(Scene_Title)` - Return to title screen
- Useful for testing without playing through content

**Common Runtime Errors**:
- `Cannot read property 'name' of undefined` - Missing database reference (bad ID)
- `Failed to load: img/characters/XXX.png` - Asset file missing or Git LFS not pulled
- `ReferenceError: XXX is not defined` - Plugin script error or load order issue
- Check browser console (F12) for stack traces

### Version Control

- **Git LFS**: Configured via `.gitattributes` for large binary assets (audio, images, fonts, videos, PSDs)
- **Line Endings**: Normalized to LF via `.gitattributes` to prevent Windows/Mac cross-platform noise
- **Branch Strategy**: Feature branches from `main` following `feature/<name>-<scope>` pattern
- **Commit Style**: Follow [Conventional Commits](https://www.conventionalcommits.org/en/v1.0.0/#summary)
- **Project File**: `game.rmmzproject` identifies this as an RPG Maker MZ v1.9.1 project (used by editor)

### Collaboration Guidelines

**Map Editing**: Avoid concurrent edits to the same `MapXXX.json` file. Coordinate with team members before editing maps, as merge conflicts in map JSON are difficult to resolve.

**Database Changes**: Batch related changes to database files (`Actors.json`, `Classes.json`, etc.) in a single PR when possible to minimize conflicts.

**Plugin Development**:
- Place new JavaScript plugins in `js/plugins/`
- Use RPG Maker's Plugin Manager to enable/disable plugins (this updates `plugins.js`)
- Never manually edit `plugins.js`

**Asset Naming**:
- Use kebab-case, descriptive names (e.g., `inn-exterior.png`, `npc-bartender-01.png`)
- Audio: prefix with type if helpful (e.g., `bgm-town-day.ogg`)
- Keep filenames lowercase
- **Special prefixes** in `img/characters/`:
  - `!` prefix: Fixed direction (non-directional character)
  - `$` prefix: Single character per file (not 8-character sheet)
  - `%` prefix: 3x4 character sheet (smaller format)

### Pull Request Requirements

- Fetch latest `main` before starting work
- Art/audio filenames must be descriptive and lowercase
- Fill out PR checklist in CONTRIBUTING.md
- Requires 1 approval before merge to `main`

### Deployment & Exports

RPG Maker MZ can export standalone builds for Windows, Mac, Linux, Web, iOS, and Android via File > Deployment in the editor. Exported builds go to project-specific output folders.

**Encryption** (optional during deployment):
- Can encrypt images, audio, and data files to prevent casual asset extraction
- Encrypted files use different extensions (.rpgmvp, .rpgmvo, .rpgmvm)
- **Warning**: Encrypted projects cannot load unencrypted assets and vice versa
- Don't test with encrypted builds during development

**Save File Compatibility**:
- Save files store serialized `$game*` object state
- Stored in `save/` directory (or browser localStorage for web builds)
- **Breaking changes**: Modifying database IDs, changing variable/switch usage can corrupt saves
- Consider save compatibility when releasing updates
- Use versioning in `$gameSystem` if implementing save migration

**Note**: `build/`, `dist/`, and `release/` directories are gitignored. Do not commit compiled/exported game builds to the repository. Distribute builds separately (itch.io, Steam, etc.).

## Game Configuration

- **Title**: Pharmageddon
- **Resolution**: 816x624 pixels
- **Starting Map**: Map001, position (8, 6)
- **Party Members**: Actors 1, 4, 6, 7
- **Battle System**: Front-view (turn-based)
- **Title BGM**: MainTheme
- **Battle BGM**: Battle1

## Common Pitfalls

### Critical Mistakes to Avoid

1. **Forgetting Git LFS setup**
   - Symptom: Game fails to load assets, shows placeholder graphics or errors
   - Fix: Run `git lfs install` then `git lfs pull` to fetch actual binary files
   - LFS tracks: images, audio, fonts, videos, PSD/XCF source files

2. **Editing JSON data files directly**
   - Files in `data/` (Actors.json, Map001.json, System.json, etc.) are **generated by RPG Maker editor**
   - Manual edits will be overwritten when the editor saves
   - **Always use RPG Maker MZ editor** to modify game data, not a text editor

3. **Manually editing `js/plugins.js`**
   - This file is auto-generated by RPG Maker's Plugin Manager
   - Changes will be lost when plugins are enabled/disabled in the editor
   - Always use Plugin Manager UI to manage plugins

4. **Concurrent map editing**
   - Multiple people editing the same `MapXXX.json` simultaneously causes merge conflicts
   - Map JSON is deeply nested and difficult to resolve conflicts in
   - **Coordinate map ownership** before editing; only one person per map at a time

5. **Breaking the script loading order**
   - Scripts must load in the exact sequence defined in `js/main.js`
   - Core files depend on previous files being loaded
   - Don't modify `main.js` unless you understand the dependency chain

6. **Cross-platform line ending issues**
   - Already handled: `.gitattributes` normalizes text files to LF
   - Don't override or disable Git's text normalization
   - Prevents Windows (CRLF) vs Unix (LF) commit noise

7. **Database ID mismatches**
   - Symptom: Game crashes with `Cannot read property 'X' of undefined`
   - Cause: Referenced ID doesn't exist (e.g., Actor references classId: 99 but only 8 classes exist)
   - Common when: Deleting database entries, copying data between projects
   - Fix: Always use RPG Maker editor to delete/reorder; it updates references automatically

8. **Plugin load order dependency**
   - Some plugins depend on others being loaded first
   - Always test after reordering plugins in Plugin Manager
   - Check plugin documentation for load order requirements

## External Resources

- [RPG Maker Web](https://www.rpgmakerweb.com/) - Official site and tutorials
- [RPG Maker MZ Core API](https://developer.rpgmakerweb.com/rpg-maker-mz/index.html) - Complete JavaScript API documentation
- [RPG Maker Tutorials](https://www.rpgmakerweb.com/category/tutorials) - Official learning resources

## What Requires RPG Maker Editor

**Claude Code cannot directly help with these tasks** - they require the RPG Maker MZ editor application:

- Creating/editing maps (tile placement, map properties, encounters)
- Creating/editing events (NPC dialogue, cutscenes, triggers)
- Modifying database entries (actors, items, skills, enemies, etc.)
- Setting up variables/switches/common events
- Configuring game settings (title, resolution, starting position)
- Managing plugins via Plugin Manager
- Playtesting with integrated debugger

**Claude Code CAN help with these tasks**:

- Writing custom plugins (`js/plugins/*.js`)
- Modifying CSS styling (`css/game.css`)
- Reading/analyzing JSON data files to understand game structure
- Debugging JavaScript errors in plugins
- Writing documentation
- Setting up git workflows
- Adding/organizing asset files (images, audio)
- Configuring deployment settings

**Key principle**: RPG Maker MZ is a **visual editor** - content creation happens in the GUI, code extends functionality via plugins.

## Important Notes

- **Do not modify** core RMMZ files (`rmmz_*.js`) unless absolutely necessary
- **Map IDs** are auto-assigned by RPG Maker; maintain external documentation for human-readable map names
- **Data files** (`data/*.json`) must be edited through RPG Maker editor, never manually
- **System.json** contains critical game configuration; changes should be made through RPG Maker editor
- The game uses custom fonts: ensure `mplus-2p-bold-sub.woff` and `Valorax-lg25V.otf` remain in `fonts/`
- **Save files** (`save/`) are currently tracked in git - consider if this is intentional for your team
